#!/usr/bin/env bash
set -euo pipefail

# Block commits with profiles.user_id pattern
if git diff --cached -U0 | grep -E "\+.*profiles.*\.eq\(['\"]user_id['\"]" -q; then
  echo "‚ùå Commit blocked: Use .eq('id', ...) for 'profiles' table, not 'user_id'."
  exit 1
fi

# Run i18n validation
node scripts/check-i18n.js || exit 1
